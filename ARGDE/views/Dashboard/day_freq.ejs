<!DOCTYPE html>
<html>
<head>

  <script src="//cdn.jsdelivr.net/d3js/3.5.17/d3.min.js" charset="utf-8"></script>
  <script src="//cdn.jsdelivr.net/npm/taucharts@1/build/production/tauCharts.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/taucharts@1/build/production/tauCharts.min.css">

  
  <style>

      body,
      #line {
      height: 100%
      }

      .color-us {
      stroke: blue
      }

      .color-bug {
      stroke: red
      }

  </style>
  <title>Minute Based - TauCharts</title>
</head>
<body>

  <div id="line"></div>
<script>

var freqData = [];
var minData = [];
var hourData = [];
var dateData = [];
var monthData = [];
var yearData = [];
var data = [];
var ticks = [];

<% day_data.forEach(function(entry){ %>
  <%var fdat = (Number(entry.frequency)); %>
  freqData = freqData.concat(<%=fdat%>); 
  <%var ddat = (entry.date); %>
  <%var date = String(ddat.getDate()); %>
  <%var year = String(ddat.getFullYear()); %>
  <%var month = String(ddat.getMonth()); %>
  dateData = dateData.concat(<%=date%>);
  monthData = monthData.concat(<%=month%>);
  yearData = yearData.concat(<%=year%>);
<% }); %>


for(i in freqData){

  var dateStamp = String(yearData[i])+"-"+String(Number(monthData[i] + 1))+"-"+String(dateData[i]);

  var d = new Date(Number(yearData[i]), Number(monthData[i]), Number(dateData[i]));

  var formatFreq = Number(freqData[i]);
  console.log(Date(dateStamp));

  data[i] = {date: d, frequency: formatFreq ,code: '170826213907_hurricane_harvey_2017'};
};
new tauCharts.Chart({
    data: data,
    dimensions: {
        date: {
            type : 'measure',
            scale: 'time'
        },
        frequency: {
          type: 'measure',
        }
    },
    type: 'line',
    x: 'date',
    y: 'frequency',
    color: 'code',
    guide: {
      color: {
        brewer: {
          '170826213907_hurricane_harvey_2017': '#ff0000'
        }
      }
    },
    plugins: [
        tauCharts.api.plugins.get('legend')(),
        tauCharts.api.plugins.get('tooltip')()
    ]
}).renderTo('#line');


</script>
</body>

</html>